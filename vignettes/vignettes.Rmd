---
title: "Use RApsimNG to modify apximx file"
author: "Bangyou Zheng"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette
vignette: |
  %\VignetteIndexEntry{RApsimNG} 
  %\VignetteEngine{knitr::rmarkdown} 
  %\VignetteEncoding{UTF-8}
---


The RApsimNG is designed to modify and run the *.apsimx simulations using R.


```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(RApsimNG)
```


## Read APSIMX file

The `wheat.apsimx` in the validation dataset of APSIM NG  is used as an example. Function `read_apsimx` is used to read `*.apsimx` file through `jsonlite::read_json` and returns as a list.


```{r read-apsimx}
# Read Wheat.apsimx file with `read_apsimx` which returns a list of json results.
file <- system.file("wheat.apsimx", package = "RApsimNG")
m <- read_apsimx(file)

```

## Search by of APSIM NG

A node in the apsimx file can be found using the [path specification](https://apsimnextgeneration.netlify.app/development/model/4-pathspecification/) in APSIM NG.
```{r search-path}
potential <- search_path(m,
    path = '[Structure].BranchingRate.PotentialBranchingRate.Vegetative.PotentialBranchingRate')
potential
```


## Run apsimx file

A function `run_models` is wrapped for APSIM NG `Models.exe` in the command line and can be called to run apsimx files. See [APSIM website](https://apsimnextgeneration.netlify.app/) for documentation. 





